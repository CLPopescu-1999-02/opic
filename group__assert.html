<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OPIC: Assert</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OPIC
   </div>
   <div id="projectbrief">Object Persistence In C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Assert</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga8dd3fbbfa1f4d8ec74332696290605d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__assert.html#ga8dd3fbbfa1f4d8ec74332696290605d4">op_assert</a>(X, ...)</td></tr>
<tr class="memdesc:ga8dd3fbbfa1f4d8ec74332696290605d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">assert with diagnosis messages. This macro emits the function, file, line nuber and stack traces.  <a href="#ga8dd3fbbfa1f4d8ec74332696290605d4">More...</a><br /></td></tr>
<tr class="separator:ga8dd3fbbfa1f4d8ec74332696290605d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae3d5bfe7f3b289b39c91194e087e4fb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__assert.html#gaae3d5bfe7f3b289b39c91194e087e4fb">op_assert_diagnose</a>(X,  cb, ...)</td></tr>
<tr class="memdesc:gaae3d5bfe7f3b289b39c91194e087e4fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">assert with callback.  <a href="#gaae3d5bfe7f3b289b39c91194e087e4fb">More...</a><br /></td></tr>
<tr class="separator:gaae3d5bfe7f3b289b39c91194e087e4fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga8dd3fbbfa1f4d8ec74332696290605d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8dd3fbbfa1f4d8ec74332696290605d4">&#9670;&nbsp;</a></span>op_assert</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define op_assert</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">X, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="op__assert_8h.html">opic/common/op_assert.h</a>&gt;</code></p>
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span>{                                                   \</div><div class="line">    if (op_unlikely(!(X))) {                            \</div><div class="line">      fprintf(stderr,<span class="stringliteral">&quot;Assertion failed: %s (%s:%d)\n&quot;</span>,  \</div><div class="line">              __func__, __FILE__, __LINE__);            \</div><div class="line">      fprintf(stderr,<span class="stringliteral">&quot;Error message: &quot;</span> __VA_ARGS__);    \</div><div class="line">      op_stacktrace(stderr);                            \</div><div class="line">    }                                                   \</div><div class="line">  } <span class="keywordflow">while</span>(0)</div></div><!-- fragment -->
<p>assert with diagnosis messages. This macro emits the function, file, line nuber and stack traces. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">X</td><td>A C expression user expects to be true </td></tr>
    <tr><td class="paramname">...</td><td><code>printf</code> like format string and arguments.</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> x = 2;</div><div class="line"><a class="code" href="group__assert.html#ga8dd3fbbfa1f4d8ec74332696290605d4">op_assert</a>(x == 1, <span class="stringliteral">&quot;x should be 1 but was %d&quot;</span>, x);</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="op__assert_8h_source.html#l00077">77</a> of file <a class="el" href="op__assert_8h_source.html">op_assert.h</a>.</p>

</div>
</div>
<a id="gaae3d5bfe7f3b289b39c91194e087e4fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae3d5bfe7f3b289b39c91194e087e4fb">&#9670;&nbsp;</a></span>op_assert_diagnose</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define op_assert_diagnose</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">X, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="op__assert_8h.html">opic/common/op_assert.h</a>&gt;</code></p>
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                  \</div><div class="line">    if (op_unlikely(!(X))) {                            \</div><div class="line">      fprintf(stderr,<span class="stringliteral">&quot;Assertion failed: %s (%s:%d)\n&quot;</span>,  \</div><div class="line">              __func__, __FILE__, __LINE__);            \</div><div class="line">      (cb)(__VA_ARGS__);                                \</div><div class="line">      op_stacktrace(stderr);                            \</div><div class="line">    }                                                   \</div><div class="line">  } <span class="keywordflow">while</span>(0)</div></div><!-- fragment -->
<p>assert with callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">X</td><td>A C expression user expects to be true </td></tr>
    <tr><td class="paramname">cb</td><td>A callback function. </td></tr>
    <tr><td class="paramname">...</td><td>Arguments to pass to the callback function.</td></tr>
  </table>
  </dd>
</dl>
<p>When the assertion failed, it first print the function name, file name, and line number where this macro was written. Then it invokes the callback with the arguments user specified. Finally it prints the stacktrace.</p>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> my_diagnose(<span class="keywordtype">int</span> x) {</div><div class="line">  fprintf(stderr, <span class="stringliteral">&quot;x should be 1 but was %d&quot;</span>, x)</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> x = 2;</div><div class="line"><a class="code" href="group__assert.html#gaae3d5bfe7f3b289b39c91194e087e4fb">op_assert_diagnose</a>(x == 1, &amp;my_diagnose, x);</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="op__assert_8h_source.html#l00111">111</a> of file <a class="el" href="op__assert_8h_source.html">op_assert.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 14 2017 08:33:27 for OPIC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
